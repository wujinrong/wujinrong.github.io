webpackJsonp([38,98],{18:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return e.$watch("value",function(t){if(t){for(var o=0;o<e.datas.length;o++)if(t==e.datas[o].value){e.key=e.datas[o].key,e.index=o,e.choose(e.datas[o].key,e.datas[o].value,o);break}var a=document.querySelectorAll(".sheet .active");try{for(var p=0;p<a.length;p++){var i=a[p].parentNode,n=i.clientHeight/2;a[p].offsetTop>n&&(i.scrollTop=a[p].offsetTop-n)}}catch(e){}}}),{isTouched:!1,bodyScrollTop:0,key:"",index:""}},props:["datas","value","id"],methods:{touchstart:function(){var e=this;e.bodyScrollTop||(e.bodyScrollTop=document.body.scrollTop),e.isTouched=!0},choose:function(e,t,o){e="undefined"==typeof e?"":e,t="undefined"==typeof t?"":t,o="undefined"==typeof o?"":o;var a=this;a.$emit("selected",{key:e,value:t,index:o,id:a.id}),a.isTouched&&(document.body.scrollTop=a.bodyScrollTop,a.bodyScrollTop=0,a.isTouched=!1)}}}},19:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".sheet-wrap{position:relative}.sheet-wrap .mask{top:0;height:2000px;background:rgba(0,0,0,.6)}.sheet-wrap .mask,.sheet-wrap .sheet{position:fixed;left:0;width:100%;z-index:999}.sheet-wrap .sheet{background:#fff;text-align:center;bottom:0;right:0;margin:0 auto;max-width:768px;max-height:40%;overflow-y:scroll}",""])},20:function(e,t,o){var a=o(19);"string"==typeof a&&(a=[[e.id,a,""]]);o(2)(a,{});a.locals&&(e.exports=a.locals)},21:function(e,t){e.exports=' <div :id=id class=sheet-wrap @touchstart=touchstart()> <div class=mask @click="choose(key, value, index)" @touchstart=touchstart()></div> <div class=sheet> <p class=row v-for="($index, i) in datas" @click="choose(i.key, i.value, $index)" :class="i.value === value && \'c-main\'">{{ i.key }}</p> </div> </div> '},22:function(e,t,o){var a,p,i={};o(20),a=o(18),p=o(21),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var n="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;p&&(n.template=p),n.computed||(n.computed={}),Object.keys(i).forEach(function(e){var t=i[e];n.computed[e]=function(){return t}})},200:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var p=o(22),i=a(p),n={applytype:sysinfo.getQueryString("applytype")||"single",applyPeriod:{datas:[],key:"",value:"",selectShow:!1},productChosen:{},applyAmount:0,confirmShow:!1,apply_id:0,money:{min:0,max:0,step:0,apply_amount:0},product:[]};t.default={data:function(){var e=this;return ajax.get("/v3/apply/confirm",{product_type:n.applytype}).then(function(t,o){if(0==o.code){n.apply_id=o.data.apply_id,n.applyAmount=o.data.money.apply_amount,n.money=o.data.money,n.product=o.data.product;var a=o.data.apply_product_id,p={};n.applyPeriod.datas=[];for(var i=0;i<n.product.length;i++)n.applyPeriod.datas.push({key:n.product[i].product_period_count_desc,value:n.product[i].product_id}),a==n.product[i].product_id&&(p=n.product[i]);n.productChosen=p,e.getPeriodAmount(n.applyAmount,n.productChosen)}else layer.warning(o.message)}),n},methods:{checkApplyAmount:function(e){var t=n.money;return e>t.apply_amount?(layer.tip("申请金额不得大于可借额度"),!1):!(e%t.step!=0||e<t.min||e>t.max)||(layer.tip("申请金额必须为 "+t.step+" 的整数倍且不得小于 "+t.min+" 不得大于 "+t.max),!1)},getPeriodAmount:function(e,t){return n.applyPeriod.key=t.product_period_count_desc,n.applyPeriod.value=t.product_id,Math.round(100*(e*t.product_interest_rate_percent+e/t.product_period_count))/100||0},showPeriodSelect:function(){n.applyPeriod.selectShow=!0},periodSelected:function(e){n.product[e.index]&&(n.productChosen=n.product[e.index],this.getPeriodAmount(n.applyAmount,n.productChosen)),n.applyPeriod.selectShow=!1},showConfirm:function(){return n.applyAmount<5e3&&n.productChosen.product_period_count>3?(layer.tip("借款金额小于 5000 申请期数不能选择 3 期以上"),!1):void(this.checkApplyAmount(n.applyAmount)&&(n.confirmShow=!0))},hideConfirm:function(){n.confirmShow=!1},submit:function(){var e=this;if(e.hideConfirm(),e.checkApplyAmount(n.applyAmount)){var t=layer.loading(!1);e.$router;ajax.get("/v3/apply/confirm-save",{apply_id:n.apply_id,apply_amount:n.applyAmount,product_id:n.applyPeriod.value}).then(function(t,o){0==o.code?e.$route.query.from?history.back():sysinfo.dsq.openView("index"):layer.warning(o.message)}).complete(function(){layer.close(t)})}}},components:{DSelect:i.default}}},333:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".auth-applyconfirm{box-sizing:border-box;padding-top:1rem}.auth-applyconfirm .banner{background:url("+o(585)+") no-repeat 50%;border-radius:.8rem;margin:0 1.2rem 1rem;padding:3rem 0}.auth-applyconfirm .apply-list .row{padding:1.8rem 3rem 1.8rem 1.6rem}.auth-applyconfirm .apply-list .select{background-position-x:98%}.auth-applyconfirm .btn-wrap{padding:7rem 3.8rem 3rem}.auth-applyconfirm .confirm-content{padding:2.5rem 1rem 1.5rem}.auth-applyconfirm .confirm-content .btns{margin-top:1.5rem}.auth-applyconfirm .confirm-content .inline{padding:.6rem 0;width:45%}",""])},437:function(e,t,o){var a=o(333);"string"==typeof a&&(a=[[e.id,a,""]]);o(2)(a,{});a.locals&&(e.exports=a.locals)},585:function(e,t,o){e.exports=o.p+"static/img/banner-bg.ba16335.png"},676:function(e,t){e.exports=' <section class=auth-applyconfirm> <div class="banner tac c-white"> <div class=fs40>{{ money.apply_amount }}元</div> <div class=fs15>可借额度</div> </div> <div class="apply-list bg-white fs18"> <div class=row> <span>借款金额</span> <span class="fr c-placeholder"> <input id=apply-amount type=number class=tar v-model=applyAmount @blur=checkApplyAmount(applyAmount)> 元 </span> </div> <div class="row select" @click=showPeriodSelect()> <span>申请期数</span> <span class="fr c-placeholder">{{ applyPeriod.key }}</span> </div> <d-select id=apply-period-select :datas=applyPeriod.datas :value=applyPeriod.value v-show=applyPeriod.selectShow @selected=periodSelected></d-select> <div class=row> <span>每期应还</span> <span class="fr c-placeholder">{{ getPeriodAmount(applyAmount, productChosen) }}元</span> </div> </div> <div class=btn-wrap> <button class="btn bottom fs20" @click=showConfirm()>确认申请</button> </div> <div class="layui-m-layer layui-m-layer0" v-show=confirmShow> <div class=layui-m-layershade></div> <div class=layui-m-layermain> <div class=layui-m-layersection> <div class="layui-m-layerchild layui-m-anim-scale"> <div class="confirm-content tac fs18"> <p>请确认最终借款金额及期数，</p> <p>确认后请耐心等待合同推送</p> <div class=btns> <button class="btn inline disabled" @click=hideConfirm()>再想想</button> <button class="btn inline" v-submit="{cb: submit}">确认</button> </div> </div> </div> </div> </div> </div> </section> '},779:function(e,t,o){var a,p,i={};o(437),a=o(200),p=o(676),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var n="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;p&&(n.template=p),n.computed||(n.computed={}),Object.keys(i).forEach(function(e){var t=i[e];n.computed[e]=function(){return t}})}});