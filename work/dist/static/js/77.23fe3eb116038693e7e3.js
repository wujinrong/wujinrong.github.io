webpackJsonp([77,98],{229:function(a,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e={formSms:{model:"",show:!1,reg:regexp.empty,err0:"验证码不能为空",err1:"验证码输入有误",errshow:"",name:"确定",class:"btn",click:"",btnTitle:"重新获取",btnNow:"重新获取",timeAll:60,timeNow:60,tid:-1},bank:{bank_code:"",individual_card_id:0,card_desc:"",individual_card_tel:"",bank_icon:""},period:[],amount:"",from:"repayCharge",ready:!1};r.default={data:function(){"/repay/delay"==this.$route.query.from?"equipment":"";if(this.$route.query.arr){var a=this.$route.query.arr.split(",");a=a.map(function(a){return+a})}else var a="";return e.period=a,ajax.get("/v3/repay/pay-info",{period:a}).then(function(a,r){if(0==r.code){var i="";e.bank.bank_code=r.data.card.bank_code,e.bank.individual_card_id=r.data.card.individual_card_id,e.bank.card_desc=r.data.card.card_desc,i=r.data.card.individual_card_tel,e.bank.individual_card_tel=i.substr(i.length-4,i.length-1);try{i=JSON.parse(store.local.get(e.from)),console.log(i),e.bank.individual_card_id=i.id,e.bank.card_desc=i.bank_name+" "+i.desc,e.bank.individual_card_tel=i.tel.substr(i.tel.length-4,i.tel.length-1),e.bank.bank_icon=i.bank_icon,e.bank.bank_code=""}catch(a){store.local.remove(e.from)}e.amount=r.data.amount,e.ready=!0}else layer.warning(r.message)}),e},methods:{submit:function(a){if(e.amount&&e.bank.individual_card_id&&!(e.bank.individual_card_id<0)){var r=this,i=layer.loading(!1),t={individual_card_id:e.bank.individual_card_id,amount:e.amount,code:a?"":e.formSms.model,period:e.period};ajax.post("/v3/repay/charge",t).then(function(a,i){var t=i.data.status;0==t?location.href="#!/repay/status?status=success&amount="+e.amount:1==t?location.href="#!/repay/status?status=fail&message="+encodeURI(i.message):2==t?location.href="#!/repay/status?status=doing":4==t?(e.formSms.show=!0,r.smsTimeOn()):layer.warning(i.message),4!=t&&r.smsTimeInit()}).catch(function(a,e){r.smsTimeInit(),layer.warning("出错啦，请稍后尝试 - "+e.status)}).complete(function(){layer.close(i)})}},getSms:function(){!e.amount||!e.bank.individual_card_id||e.bank.individual_card_id<0||e.formSms.btnNow==e.formSms.btnTitle&&(e.formSms.btnNow=e.formSms.timeAll+" s",this.submit(!0))},checkSms:function(){return e.formSms.reg(e.formSms.model)?(e.formSms.errshow="",!0):(e.formSms.errshow=e.formSms.err0,!1)},smsTimeInit:function(){clearInterval(e.formSms.tid),e.formSms.btnNow=e.formSms.btnTitle,e.formSms.timeNow=e.formSms.timeAll},smsTimeOn:function(){e.formSms.timeNow=e.formSms.timeAll,e.formSms.tid=setInterval(function(){e.formSms.timeNow--,e.formSms.timeNow?e.formSms.btnNow=e.formSms.timeNow+" s":(e.formSms.btnNow=e.formSms.btnTitle,e.formSms.timeNow=e.formSms.timeAll,clearInterval(e.formSms.tid))},1e3)},smsClick:function(){this.checkSms()&&this.submit()}},destroyed:function(){store.local.remove(e.from),e.bank.individual_card_id=0,e.bank.card_desc="",e.bank.individual_card_tel=""}}},362:function(a,r,e){r=a.exports=e(1)(),r.push([a.id,".repay-charge .title{padding:3.5rem 0 0}.repay-charge .card-desc{background-size:contain;background-repeat:no-repeat;background-position:0;display:inline-block;padding-left:2.3rem}.repay-charge .row{padding:2rem 1.6rem}.repay-charge .link{padding-right:2.5rem;background-position:99%}.repay-charge .btn-wrap{padding:5.5rem 1.2rem 1.5rem}.repay-charge .btn-wrap a{width:auto}.repay-charge .dialog{position:fixed;top:10rem;left:0;right:0;width:22rem;border-radius:5px;margin:0 auto;padding:2rem;text-align:center;background:#fff;z-index:1000}.repay-charge .dialog .sms-wrap{height:3rem;padding:1rem 0}.repay-charge .dialog .sms-wrap>*{float:left}.repay-charge .dialog .sms-wrap input{border:1px solid #dbdbdb;width:65%;height:100%;padding:0 1rem;box-sizing:border-box}.repay-charge .dialog .sms-wrap button{height:100%;width:33%;background:#ff6262;color:#fff;margin-left:2%}.repay-charge .dialog .sms-wrap button:active{box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.repay-charge .dialog .sms-wrap .disable{background:#747474}.repay-charge .dialog .err{color:#ff6262}.repay-charge .dialog .btn{width:22.5rem;margin-top:1rem}",""])},466:function(a,r,e){var i=e(362);"string"==typeof i&&(i=[[a.id,i,""]]);e(2)(i,{});i.locals&&(a.exports=i.locals)},705:function(a,r){a.exports=' <section class="repay-charge container fs15" v-show=ready> <div class="title tac"> <p class="fs40 c-main">{{ amount }}</p> <p class=c-gray>应还金额(元)</p> </div> <div class=group> <div class=row></div> <a class="row link" v-link="\'/bank/list?from=\' + from"> <span>支付方式</span> <span class="card-desc fr c-green" v-show="bank.individual_card_id > 0" :style="bank.bank_code ? {\'background-image\': \'url(./static/img/bank/\' + bank.bank_code + \'.png)\'} : {\'background-image\': \'url(\' + bank.bank_icon + \')\'}">{{ bank.card_desc }}</span> </a> <div class=row> <span>支付金额</span> <span class="fr c-light">{{ amount }}元</span> </div> </div> <div class=btn-wrap> <button class=btn v-submit="{cb: submit}">立即支付</button> </div> <div class="tac c-light">暂不支持信用卡，请选择借记卡支付</div> <div class=pop-sms v-show=formSms.show> <div class=mask></div> <div class=dialog> <p class=fs18>验证手机号</p> <p>已向您银行卡预留手机尾号{{ bank.individual_card_tel }}发送了验证码</p> <div class=sms-wrap> <input type=text v-model=formSms.model placeholder=输入短信验证码> <button class=fs14 :class="formSms.btnTitle != formSms.btnNow && \'disable\'" @click=getSms()>{{ formSms.btnNow }}</button> </div> <p class=err v-show=formSms.errshow>{{ formSms.errshow }}</p> <button class=btn v-submit="{cb: smsClick}">{{ formSms.name }}</button> </div> </div> </section> '},808:function(a,r,e){var i,t,s={};e(466),i=e(229),t=e(705),a.exports=i||{},a.exports.__esModule&&(a.exports=a.exports.default);var o="function"==typeof a.exports?a.exports.options||(a.exports.options={}):a.exports;t&&(o.template=t),o.computed||(o.computed={}),Object.keys(s).forEach(function(a){var r=s[a];o.computed[a]=function(){return r}})}});